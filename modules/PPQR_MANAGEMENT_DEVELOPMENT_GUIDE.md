# pPQRç®¡ç†æ¨¡å— - å¼€å‘æŒ‡å—

## ğŸ“‹ æ¨¡å—æ¦‚è¿°

### åŠŸèƒ½å®šä½
pPQR (Preliminary Procedure Qualification Record) ç®¡ç†æ¨¡å—ç”¨äºç®¡ç†é¢„å¤‡å·¥è‰ºè¯„å®šè®°å½•ï¼Œæ˜¯æ­£å¼ PQR ä¹‹å‰çš„è¯•éªŒæ€§è¯„å®šï¼Œç”¨äºå·¥è‰ºå¼€å‘å’Œä¼˜åŒ–ã€‚

### é€‚ç”¨åœºæ™¯
- æ–°å·¥è‰ºå¼€å‘å‰çš„é¢„å¤‡è¯•éªŒ
- å·¥è‰ºå‚æ•°ä¼˜åŒ–å’Œè°ƒæ•´
- å¿«é€ŸéªŒè¯å·¥è‰ºå¯è¡Œæ€§
- ä¸ºæ­£å¼ PQR æä¾›å‚è€ƒ
- å·¥è‰ºç ”å‘è®°å½•ç®¡ç†

### å¼€å‘ä¼˜å…ˆçº§
**ç¬¬äºŒé˜¶æ®µ** - é‡è¦åŠŸèƒ½ï¼Œä¼˜å…ˆå¼€å‘

---

## ğŸ¯ ä¼šå‘˜æƒé™

### è®¿é—®æƒé™
| ä¼šå‘˜ç­‰çº§ | è®¿é—®æƒé™ | æ•°é‡é™åˆ¶ | åŠŸèƒ½èŒƒå›´ |
|---------|---------|---------|---------|
| æ¸¸å®¢æ¨¡å¼ | âŒ ä¸å¯è®¿é—® | 0 | - |
| ä¸ªäººå…è´¹ç‰ˆ | âŒ ä¸å¯è®¿é—® | 0 | - |
| ä¸ªäººä¸“ä¸šç‰ˆ | âœ… å¯è®¿é—® | æœ€å¤š 30 ä¸ª | åŸºç¡€å¢åˆ æ”¹æŸ¥ + å¯¼å‡º |
| ä¸ªäººé«˜çº§ç‰ˆ | âœ… å¯è®¿é—® | æœ€å¤š 50 ä¸ª | å®Œæ•´åŠŸèƒ½ + è¯•éªŒç®¡ç† |
| ä¸ªäººæ——èˆ°ç‰ˆ | âœ… å¯è®¿é—® | æœ€å¤š 100 ä¸ª | å®Œæ•´åŠŸèƒ½ + é«˜çº§ç‰¹æ€§ |
| ä¼ä¸šç‰ˆ | âœ… å¯è®¿é—® | æœ€å¤š 200 ä¸ª | å®Œæ•´åŠŸèƒ½ + ä¼ä¸šåä½œ |
| ä¼ä¸šPRO | âœ… å¯è®¿é—® | æœ€å¤š 400 ä¸ª | å®Œæ•´åŠŸèƒ½ + ä¼ä¸šåä½œ |
| ä¼ä¸šPRO MAX | âœ… å¯è®¿é—® | æœ€å¤š 500 ä¸ª | å®Œæ•´åŠŸèƒ½ + ä¼ä¸šåä½œ |

**é‡è¦è¯´æ˜**: pPQR åŠŸèƒ½ä»…å¯¹**ä¸ªäººä¸“ä¸šç‰ˆåŠä»¥ä¸Š**ä¼šå‘˜å¼€æ”¾ï¼Œå…è´¹ç‰ˆå’Œæ¸¸å®¢æ¨¡å¼ä¸å¯è®¿é—®ã€‚

### åŠŸèƒ½æƒé™çŸ©é˜µ
| åŠŸèƒ½ | å…è´¹ç‰ˆ | ä¸“ä¸šç‰ˆ | é«˜çº§ç‰ˆ | æ——èˆ°ç‰ˆ | ä¼ä¸šç‰ˆ |
|------|--------|--------|--------|--------|--------|
| åˆ›å»º pPQR | âŒ | âœ… | âœ… | âœ… | âœ… |
| ç¼–è¾‘ pPQR | âŒ | âœ… | âœ… | âœ… | âœ… |
| åˆ é™¤ pPQR | âŒ | âœ… | âœ… | âœ… | âœ… |
| æŸ¥çœ‹ pPQR | âŒ | âœ… | âœ… | âœ… | âœ… |
| å¯¼å‡ºæŠ¥å‘Š | âŒ | âœ… | âœ… | âœ… | âœ… |
| è¯•éªŒæ•°æ®ç®¡ç† | âŒ | âœ… | âœ… | âœ… | âœ… |
| è½¬æ¢ä¸º PQR | âŒ | âŒ | âœ… | âœ… | âœ… |
| å‚æ•°å¯¹æ¯”åˆ†æ | âŒ | âŒ | âœ… | âœ… | âœ… |
| æ‰¹é‡è¯•éªŒ | âŒ | âŒ | âŒ | âœ… | âœ… |

---

## ğŸ“Š åŠŸèƒ½æ¸…å•

### 1. pPQR åŸºç¡€ç®¡ç†
- **åˆ›å»º pPQR**: å¡«å†™é¢„å¤‡è¯„å®šè®°å½•
- **ç¼–è¾‘ pPQR**: ä¿®æ”¹ pPQR æ•°æ®
- **åˆ é™¤ pPQR**: è½¯åˆ é™¤ pPQR
- **æŸ¥çœ‹ pPQR**: è¯¦ç»†ä¿¡æ¯å±•ç¤º
- **å¤åˆ¶ pPQR**: åŸºäºç°æœ‰ pPQR åˆ›å»ºæ–°è®°å½•
- **æœç´¢ pPQR**: æŒ‰ç¼–å·ã€ç›®çš„ã€çŠ¶æ€æœç´¢
- **ç­›é€‰ pPQR**: æŒ‰è¯•éªŒç»“æœã€æ—¥æœŸç­‰ç­›é€‰

### 2. è¯•éªŒå‚æ•°è®°å½•
- **è¯•éªŒç›®çš„**: è®°å½•è¯•éªŒç›®çš„å’Œé¢„æœŸç›®æ ‡
- **è¯•éªŒæ–¹æ¡ˆ**: è®°å½•è¯•éªŒæ–¹æ¡ˆå’Œæ­¥éª¤
- **å‚æ•°è®¾ç½®**: è®°å½•è®¡åˆ’ä½¿ç”¨çš„å‚æ•°
- **å®é™…å‚æ•°**: è®°å½•å®é™…ä½¿ç”¨çš„å‚æ•°
- **å‚æ•°è°ƒæ•´**: è®°å½•å‚æ•°è°ƒæ•´è¿‡ç¨‹
- **å¤šç»„è¯•éªŒ**: æ”¯æŒè®°å½•å¤šç»„å¯¹æ¯”è¯•éªŒ

### 3. è¯•éªŒç»“æœè®°å½•
- **å¤–è§‚æ£€æŸ¥**: è®°å½•ç„Šç¼å¤–è§‚è´¨é‡
- **å°ºå¯¸æµ‹é‡**: è®°å½•ç„Šç¼å°ºå¯¸æ•°æ®
- **ç®€æ˜“æµ‹è¯•**: è®°å½•ç®€å•çš„åŠ›å­¦æµ‹è¯•
- **ç¼ºé™·è®°å½•**: è®°å½•å‘ç°çš„ç¼ºé™·
- **è¯•éªŒç…§ç‰‡**: ä¸Šä¼ è¯•éªŒè¿‡ç¨‹ç…§ç‰‡
- **è¯•éªŒè§†é¢‘**: ä¸Šä¼ è¯•éªŒè§†é¢‘ï¼ˆæ——èˆ°ç‰ˆï¼‰

### 4. å‚æ•°ä¼˜åŒ–ï¼ˆé«˜çº§ç‰ˆåŠä»¥ä¸Šï¼‰
- **å‚æ•°å¯¹æ¯”**: å¯¹æ¯”ä¸åŒå‚æ•°ç»„çš„ç»“æœ
- **è¶‹åŠ¿åˆ†æ**: åˆ†æå‚æ•°å˜åŒ–è¶‹åŠ¿
- **æœ€ä¼˜å‚æ•°**: æ ‡è®°æœ€ä¼˜å‚æ•°ç»„åˆ
- **ä¼˜åŒ–å»ºè®®**: ç³»ç»Ÿç»™å‡ºä¼˜åŒ–å»ºè®®

### 5. è½¬æ¢åŠŸèƒ½ï¼ˆé«˜çº§ç‰ˆåŠä»¥ä¸Šï¼‰
- **è½¬æ¢ä¸º PQR**: å°†æˆåŠŸçš„ pPQR è½¬æ¢ä¸ºæ­£å¼ PQR
- **æ•°æ®è¿ç§»**: è‡ªåŠ¨è¿ç§»ç›¸å…³æ•°æ®
- **è¡¥å……ä¿¡æ¯**: è¡¥å…… PQR æ‰€éœ€çš„é¢å¤–ä¿¡æ¯
- **å…³è”ä¿æŒ**: ä¿æŒä¸åŸ pPQR çš„å…³è”

### 6. åä½œåŠŸèƒ½ï¼ˆä¼ä¸šç‰ˆï¼‰
- **å›¢é˜Ÿå…±äº«**: ä¸å›¢é˜Ÿæˆå‘˜å…±äº« pPQR
- **è¯„è®ºè®¨è®º**: å›¢é˜Ÿæˆå‘˜å¯ä»¥è¯„è®º
- **ç‰ˆæœ¬å¯¹æ¯”**: å¯¹æ¯”ä¸åŒäººå‘˜çš„è¯•éªŒç»“æœ
- **çŸ¥è¯†ç§¯ç´¯**: å½¢æˆä¼ä¸šå·¥è‰ºçŸ¥è¯†åº“

### 7. å¯¼å‡ºåŠŸèƒ½
- **å¯¼å‡º PDF**: ç”Ÿæˆè¯•éªŒæŠ¥å‘Š
- **å¯¼å‡º Excel**: å¯¼å‡ºè¯•éªŒæ•°æ®
- **å¯¼å‡ºå¯¹æ¯”æŠ¥å‘Š**: å¯¼å‡ºå‚æ•°å¯¹æ¯”åˆ†ææŠ¥å‘Š
- **æ‰¹é‡å¯¼å‡º**: æ‰¹é‡å¯¼å‡ºå¤šä¸ª pPQR

---

## ğŸ—„ï¸ æ•°æ®æ¨¡å‹

### pPQR è®°å½•è¡¨
```sql
CREATE TABLE ppqr_records (
    -- ä¸»é”®å’ŒåŸºç¡€å­—æ®µ
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    company_id UUID REFERENCES companies(id) ON DELETE CASCADE,
    factory_id UUID REFERENCES factories(id) ON DELETE SET NULL,
    
    -- pPQR åŸºæœ¬ä¿¡æ¯
    ppqr_number VARCHAR(100) NOT NULL,             -- pPQR ç¼–å·
    title VARCHAR(255) NOT NULL,                   -- æ ‡é¢˜
    test_date DATE,                                -- è¯•éªŒæ—¥æœŸ
    status VARCHAR(50) DEFAULT 'draft',            -- çŠ¶æ€: draft, testing, completed, converted
    purpose TEXT,                                  -- è¯•éªŒç›®çš„
    test_plan TEXT,                                -- è¯•éªŒæ–¹æ¡ˆ
    
    -- è¯•éªŒå‚æ•°ï¼ˆè®¡åˆ’ï¼‰
    planned_parameters JSONB,                      -- è®¡åˆ’å‚æ•°
    
    -- ç„Šæ¥å·¥è‰ºå‚æ•°ï¼ˆå®é™…ä½¿ç”¨ï¼‰
    base_material VARCHAR(255),                    -- æ¯æ
    base_material_thickness DECIMAL(8,2),          -- æ¯æåšåº¦
    filler_material VARCHAR(255),                  -- å¡«å……ææ–™
    welding_process VARCHAR(100),                  -- ç„Šæ¥æ–¹æ³•
    joint_type VARCHAR(100),                       -- æ¥å¤´ç±»å‹
    welding_position VARCHAR(50),                  -- ç„Šæ¥ä½ç½®
    
    -- å®é™…å‚æ•°
    actual_parameters JSONB,                       -- å®é™…å‚æ•°
    parameter_adjustments JSONB,                   -- å‚æ•°è°ƒæ•´è®°å½•
    
    -- æ¸©åº¦å‚æ•°
    preheat_temp DECIMAL(10,2),                   -- é¢„çƒ­æ¸©åº¦
    interpass_temp DECIMAL(10,2),                 -- å±‚é—´æ¸©åº¦
    
    -- ç”µæ°”å‚æ•°
    welding_current DECIMAL(10,2),                -- ç„Šæ¥ç”µæµ
    welding_voltage DECIMAL(10,2),                -- ç„Šæ¥ç”µå‹
    travel_speed DECIMAL(10,2),                   -- è¡Œèµ°é€Ÿåº¦
    heat_input DECIMAL(10,2),                     -- çƒ­è¾“å…¥
    
    -- è¯•éªŒç»“æœ
    visual_inspection JSONB,                       -- å¤–è§‚æ£€æŸ¥ç»“æœ
    dimension_measurements JSONB,                  -- å°ºå¯¸æµ‹é‡ç»“æœ
    simple_tests JSONB,                           -- ç®€æ˜“æµ‹è¯•ç»“æœ
    defects_found JSONB,                          -- å‘ç°çš„ç¼ºé™·
    
    -- è¯•éªŒè¯„ä»·
    is_successful BOOLEAN,                         -- æ˜¯å¦æˆåŠŸ
    success_criteria TEXT,                         -- æˆåŠŸæ ‡å‡†
    evaluation_notes TEXT,                         -- è¯„ä»·è¯´æ˜
    improvement_suggestions TEXT,                  -- æ”¹è¿›å»ºè®®
    
    -- è¯•éªŒäººå‘˜
    welder_id UUID REFERENCES welders(id),         -- ç„Šå·¥
    tester_id UUID REFERENCES users(id),           -- è¯•éªŒäººå‘˜
    
    -- å¤šç»„è¯•éªŒ
    test_group_number INTEGER DEFAULT 1,           -- è¯•éªŒç»„å·
    parent_ppqr_id UUID REFERENCES ppqr_records(id), -- çˆ¶ pPQRï¼ˆç”¨äºå¯¹æ¯”è¯•éªŒï¼‰
    
    -- è½¬æ¢ä¿¡æ¯
    converted_to_pqr_id UUID REFERENCES pqr_records(id), -- è½¬æ¢åçš„ PQR ID
    converted_at TIMESTAMP,                        -- è½¬æ¢æ—¶é—´
    converted_by UUID REFERENCES users(id),        -- è½¬æ¢äºº
    
    -- é™„ä»¶
    test_photos JSONB,                            -- è¯•éªŒç…§ç‰‡
    test_videos JSONB,                            -- è¯•éªŒè§†é¢‘
    attachments JSONB,                            -- å…¶ä»–é™„ä»¶
    
    -- åä½œ
    shared_with JSONB,                            -- å…±äº«ç»™çš„ç”¨æˆ·åˆ—è¡¨
    comments JSONB,                               -- è¯„è®ºåˆ—è¡¨
    
    -- å¤‡æ³¨
    notes TEXT,                                    -- å¤‡æ³¨
    tags JSONB,                                   -- æ ‡ç­¾
    
    -- å®¡è®¡å­—æ®µ
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_by UUID REFERENCES users(id),
    updated_by UUID REFERENCES users(id),
    deleted_at TIMESTAMP,
    
    -- ç´¢å¼•
    INDEX idx_user (user_id),
    INDEX idx_company (company_id),
    INDEX idx_factory (factory_id),
    INDEX idx_ppqr_number (ppqr_number),
    INDEX idx_status (status),
    INDEX idx_test_date (test_date),
    INDEX idx_welder (welder_id),
    INDEX idx_parent (parent_ppqr_id),
    INDEX idx_converted (converted_to_pqr_id),
    INDEX idx_deleted (deleted_at)
);
```

### pPQR å‚æ•°å¯¹æ¯”è¡¨
```sql
CREATE TABLE ppqr_parameter_comparisons (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    
    comparison_name VARCHAR(255),                  -- å¯¹æ¯”åç§°
    ppqr_ids JSONB NOT NULL,                      -- å‚ä¸å¯¹æ¯”çš„ pPQR ID åˆ—è¡¨
    comparison_results JSONB,                      -- å¯¹æ¯”ç»“æœ
    best_parameters JSONB,                         -- æœ€ä¼˜å‚æ•°
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_user (user_id)
);
```

---

## ğŸ”Œ APIæ¥å£

### 1. pPQR åˆ—è¡¨
```http
GET /api/v1/ppqr?page=1&page_size=20&status=completed
Authorization: Bearer <token>
```

### 2. åˆ›å»º pPQR
```http
POST /api/v1/ppqr
Authorization: Bearer <token>
Content-Type: application/json

{
  "ppqr_number": "pPQR-2025-001",
  "title": "Q235B æ–°å·¥è‰ºé¢„å¤‡è¯•éªŒ",
  "test_date": "2025-10-15",
  "purpose": "éªŒè¯æ–°çš„ç„Šæ¥å‚æ•°ç»„åˆ",
  "base_material": "Q235B",
  "filler_material": "E7018",
  "welding_process": "SMAW",
  "planned_parameters": {
    "current": "100-120A",
    "voltage": "22-25V"
  }
}
```

### 3. æ›´æ–°è¯•éªŒç»“æœ
```http
PUT /api/v1/ppqr/{id}/results
Authorization: Bearer <token>
Content-Type: application/json

{
  "actual_parameters": {
    "current": 110,
    "voltage": 23
  },
  "visual_inspection": {
    "appearance": "è‰¯å¥½",
    "defects": []
  },
  "is_successful": true
}
```

### 4. è½¬æ¢ä¸º PQRï¼ˆé«˜çº§ç‰ˆåŠä»¥ä¸Šï¼‰
```http
POST /api/v1/ppqr/{id}/convert-to-pqr
Authorization: Bearer <token>
Content-Type: application/json

{
  "pqr_number": "PQR-2025-001",
  "additional_tests": {
    "tensile_test": true,
    "bend_test": true
  }
}
```

### 5. å‚æ•°å¯¹æ¯”ï¼ˆé«˜çº§ç‰ˆåŠä»¥ä¸Šï¼‰
```http
POST /api/v1/ppqr/compare
Authorization: Bearer <token>
Content-Type: application/json

{
  "ppqr_ids": ["uuid1", "uuid2", "uuid3"],
  "comparison_name": "ç”µæµå‚æ•°å¯¹æ¯”"
}
```

### 6. å…±äº« pPQRï¼ˆä¼ä¸šç‰ˆï¼‰
```http
POST /api/v1/ppqr/{id}/share
Authorization: Bearer <token>
Content-Type: application/json

{
  "user_ids": ["uuid1", "uuid2"]
}
```

---

## ğŸ’¼ ä¸šåŠ¡é€»è¾‘

### 1. åˆ›å»º pPQR
```python
class PPQRService:
    @require_quota("ppqr_records")
    @require_feature("ppqr_crud")  # éœ€è¦ä¸“ä¸šç‰ˆåŠä»¥ä¸Š
    async def create_ppqr(
        self,
        ppqr_data: PPQRCreate,
        user_id: UUID,
        db: Session
    ) -> PPQRRecord:
        """åˆ›å»º pPQR"""
        
        # æ£€æŸ¥ä¼šå‘˜ç­‰çº§
        user = db.query(User).filter(User.id == user_id).first()
        if user.membership_tier == "free":
            raise HTTPException(403, "pPQR åŠŸèƒ½éœ€è¦ä¸“ä¸šç‰ˆåŠä»¥ä¸Šä¼šå‘˜")
        
        # æ£€æŸ¥é…é¢
        checker = QuotaChecker(db)
        if not checker.check_quota(user, "ppqr_records"):
            raise HTTPException(403, "pPQR é…é¢å·²æ»¡")
        
        # ç”Ÿæˆç¼–å·
        if not ppqr_data.ppqr_number:
            ppqr_data.ppqr_number = self._generate_ppqr_number(user_id, db)
        
        # åˆ›å»ºè®°å½•
        ppqr = PPQRRecord(
            **ppqr_data.dict(),
            user_id=user_id,
            created_by=user_id,
            status="draft"
        )
        
        db.add(ppqr)
        db.commit()
        
        return ppqr
```

### 2. è½¬æ¢ä¸º PQR
```python
@require_feature("ppqr_to_pqr_conversion")  # éœ€è¦é«˜çº§ç‰ˆåŠä»¥ä¸Š
async def convert_to_pqr(
    self,
    ppqr_id: UUID,
    conversion_data: PPQRConversion,
    user_id: UUID,
    db: Session
) -> PQRRecord:
    """å°† pPQR è½¬æ¢ä¸º PQR"""
    
    ppqr = db.query(PPQRRecord).filter(
        PPQRRecord.id == ppqr_id,
        PPQRRecord.user_id == user_id
    ).first()
    
    if not ppqr:
        raise HTTPException(404, "pPQR ä¸å­˜åœ¨")
    
    if not ppqr.is_successful:
        raise HTTPException(400, "åªèƒ½è½¬æ¢æˆåŠŸçš„ pPQR")
    
    # åˆ›å»º PQR
    pqr = PQRRecord(
        pqr_number=conversion_data.pqr_number,
        title=ppqr.title,
        base_material=ppqr.base_material,
        filler_material=ppqr.filler_material,
        welding_process=ppqr.welding_process,
        # ... å¤åˆ¶å…¶ä»–å­—æ®µ
        user_id=user_id,
        created_by=user_id,
        status="pending"
    )
    
    db.add(pqr)
    
    # æ›´æ–° pPQR
    ppqr.converted_to_pqr_id = pqr.id
    ppqr.converted_at = datetime.now()
    ppqr.converted_by = user_id
    ppqr.status = "converted"
    
    db.commit()
    
    return pqr
```

### 3. å‚æ•°å¯¹æ¯”åˆ†æ
```python
@require_feature("parameter_comparison")  # éœ€è¦é«˜çº§ç‰ˆåŠä»¥ä¸Š
async def compare_parameters(
    self,
    ppqr_ids: List[UUID],
    user_id: UUID,
    db: Session
) -> Dict[str, Any]:
    """å¯¹æ¯”å¤šä¸ª pPQR çš„å‚æ•°"""
    
    ppqrs = db.query(PPQRRecord).filter(
        PPQRRecord.id.in_(ppqr_ids),
        PPQRRecord.user_id == user_id
    ).all()
    
    if len(ppqrs) < 2:
        raise HTTPException(400, "è‡³å°‘éœ€è¦2ä¸ª pPQR è¿›è¡Œå¯¹æ¯”")
    
    # æå–å‚æ•°
    comparison = {
        "ppqrs": [],
        "parameters": {},
        "best_result": None
    }
    
    for ppqr in ppqrs:
        comparison["ppqrs"].append({
            "id": str(ppqr.id),
            "number": ppqr.ppqr_number,
            "current": ppqr.welding_current,
            "voltage": ppqr.welding_voltage,
            "heat_input": ppqr.heat_input,
            "is_successful": ppqr.is_successful
        })
    
    # æ‰¾å‡ºæœ€ä¼˜å‚æ•°
    successful_ppqrs = [p for p in ppqrs if p.is_successful]
    if successful_ppqrs:
        comparison["best_result"] = successful_ppqrs[0]
    
    return comparison
```

---

## ğŸ” æƒé™æ§åˆ¶

### ä¼šå‘˜ç­‰çº§æ£€æŸ¥
```python
@router.get("/ppqr")
@require_feature("ppqr_crud")  # è‡ªåŠ¨æ£€æŸ¥æ˜¯å¦ä¸ºä¸“ä¸šç‰ˆåŠä»¥ä¸Š
async def get_ppqr_list(
    current_user: User = Depends(get_current_active_user),
    db: Session = Depends(get_db)
):
    """è·å– pPQR åˆ—è¡¨ï¼ˆä»…ä¸“ä¸šç‰ˆåŠä»¥ä¸Šï¼‰"""
    service = PPQRService(db)
    return service.get_ppqr_list(current_user.id, db)
```

---

## ğŸ¨ å‰ç«¯ç•Œé¢

### pPQR åˆ›å»ºé¡µé¢
```typescript
// src/pages/PPQR/Create.tsx

const PPQRCreate: React.FC = () => {
  const { membership } = useAuth();
  
  // æ£€æŸ¥ä¼šå‘˜ç­‰çº§
  if (membership.tier === 'free') {
    return <UpgradePrompt feature="pPQRç®¡ç†" requiredTier="ä¸“ä¸šç‰ˆ" />;
  }
  
  return (
    <Form onFinish={handleSubmit}>
      <Form.Item label="è¯•éªŒç›®çš„" name="purpose">
        <TextArea rows={4} />
      </Form.Item>
      
      <Form.Item label="è®¡åˆ’å‚æ•°">
        <ParameterInput />
      </Form.Item>
      
      <Button type="primary" htmlType="submit">
        åˆ›å»º pPQR
      </Button>
    </Form>
  );
};
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2025-10-16  
**å¼€å‘çŠ¶æ€**: å¾…å¼€å‘

