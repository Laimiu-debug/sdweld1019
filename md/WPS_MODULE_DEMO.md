# WPS 模块管理系统 - 功能演示

## 🎬 演示场景

### 场景 1: 预览和复制预设模块

**用户故事**: 
作为一名焊接工程师，我想查看"焊接参数"预设模块的具体内容，并基于它创建一个适合我们公司的自定义模块。

**操作步骤**:

1. **打开模块管理页面**
   ```
   导航: WPS模板管理 → 模块管理
   或直接访问: /wps/modules
   ```

2. **预览预设模块**
   - 在"预设模块"标签页中找到"焊接参数"模块
   - 点击"预览"按钮
   - 查看模块的真实表单效果：
     * 焊接电流（数字输入，单位：A）
     * 焊接电压（数字输入，单位：V）
     * 焊接速度（数字输入，单位：cm/min）
     * 焊接方法（下拉选择）
     * 等等...

3. **复制预设模块**
   - 点击"复制"按钮
   - 系统自动打开创建器，并填充所有字段
   - 模块名称自动变为"焊接参数(副本)"

4. **自定义修改**
   - 修改名称为"我公司焊接参数"
   - 添加新字段："预热温度"（数字类型，单位：℃）
   - 删除不需要的字段
   - 修改某些字段的默认值

5. **保存自定义模块**
   - 点击"保存副本"
   - 成功创建自定义模块
   - 在"自定义模块"标签页中看到新模块

---

### 场景 2: 创建包含技术图表的WPS

**用户故事**: 
作为一名焊接工程师，我需要创建一份WPS文档，其中包含坡口图和焊层焊道图。

**操作步骤**:

#### 步骤 1: 创建WPS并选择模板
```
1. 访问 /wps/create
2. 填写基本信息：
   - WPS编号: WPS-2024-001
   - 焊接工艺: SMAW (手工电弧焊)
   - 标准: EN ISO 15609-1
3. 选择包含"技术图表"模块的模板
```

#### 步骤 2: 生成坡口图
```
1. 找到"坡口图"字段
2. 点击"自动生成坡口图"按钮
3. 在生成器中设置参数：
   - 坡口类型: V型
   - 坡口角度: 60°
   - 根部间隙: 2mm
   - 厚度: 12mm
4. 观察右侧实时预览
5. 点击"生成图表"
6. 图表自动填充到字段
```

**生成的坡口图示例**:
```
┌─────────────────────────────┐
│   坡口类型: V型              │
│   坡口角度: 60°              │
│   根部间隙: 2mm              │
│   厚度: 12mm                 │
│                              │
│        ╱────────╲            │
│       ╱          ╲           │
│      ╱            ╲          │
│     ╱              ╲         │
│    ╱                ╲        │
│   ╱                  ╲       │
│  ╱                    ╲      │
│ ╱                      ╲     │
│╱________________________╲    │
│    ↑              ↑          │
│   2mm 根部间隙              │
└─────────────────────────────┘
```

#### 步骤 3: 生成焊层焊道图
```
1. 找到"焊层焊道图"字段
2. 点击"自动生成焊层焊道图"按钮
3. 在生成器中设置参数：
   - 焊层数量: 3层
   - 每层焊道数: 2道
4. 观察实时预览
5. 点击"生成图表"
6. 图表自动填充到字段
```

**生成的焊层焊道图示例**:
```
┌─────────────────────────────┐
│ 焊层焊道图 (3层, 每层2道)    │
│                              │
│ 第1层 ┃ 1  │  2 ┃           │
│       ┗━━━━━━━━━━┛           │
│                              │
│ 第2层 ┃ 1  │  2 ┃           │
│       ┗━━━━━━━━━━┛           │
│                              │
│ 第3层 ┃ 1  │  2 ┃           │
│       ┗━━━━━━━━━━┛           │
└─────────────────────────────┘
```

#### 步骤 4: 或者手动上传图表
```
如果已有现成的图表：
1. 点击上传区域
2. 选择图片文件（PNG/JPG/SVG）
3. 图片自动显示预览
4. 可以删除重新上传
```

#### 步骤 5: 完成并保存
```
1. 填写其他必要信息
2. 点击"保存WPS"
3. 系统保存所有数据，包括生成的图表
```

---

### 场景 3: 管理自定义模块

**用户故事**: 
作为一名焊接工程师，我创建了多个自定义模块，现在想查看和管理它们。

**操作步骤**:

#### 查看自定义模块列表
```
1. 访问 /wps/modules
2. 切换到"自定义模块"标签页
3. 查看所有自定义模块：
   - 模块名称
   - 描述
   - 分类
   - 字段数
   - 使用次数
   - 是否可重复
```

#### 预览自定义模块
```
1. 找到"我公司焊接参数"模块
2. 点击"预览"按钮
3. 查看真实表单效果（不是字段列表）
4. 确认模块符合预期
```

#### 复制自定义模块
```
1. 找到"我公司焊接参数"模块
2. 点击"复制"按钮
3. 修改名称为"项目A焊接参数"
4. 调整部分字段
5. 保存为新模块
```

#### 删除不需要的模块
```
1. 找到不再使用的模块
2. 点击"删除"按钮
3. 确认删除
4. 模块从列表中移除
```

---

## 🎨 界面截图说明

### 模块管理页面
```
┌─────────────────────────────────────────────────────────┐
│ 模块管理                    [返回WPS模板管理] [创建自定义模块] │
├─────────────────────────────────────────────────────────┤
│ [预设模块] [自定义模块 (3)]                               │
├─────────────────────────────────────────────────────────┤
│ 模块名称        │ 描述          │ 分类 │ 字段数 │ 操作    │
├─────────────────────────────────────────────────────────┤
│ 🔷 基本信息     │ 基础信息字段   │ 基本 │  8    │ [预览] [复制] │
│ 🔷 焊接参数     │ 焊接工艺参数   │ 电气 │ 12    │ [预览] [复制] │
│ 🔷 技术图表     │ 坡口图等图表   │ 基本 │  3    │ [预览] [复制] │
└─────────────────────────────────────────────────────────┘
```

### 模块预览模态框
```
┌─────────────────────────────────────────────────────────┐
│ 模块预览                                        [关闭]   │
├─────────────────────────────────────────────────────────┤
│ 模块预览: 焊接参数                                       │
│ 描述: 焊接工艺参数                                       │
│ 字段数: 12 | 可重复                                      │
├─────────────────────────────────────────────────────────┤
│ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐        │
│ │ 焊接电流(A) │ │ 焊接电压(V) │ │ 焊接速度    │        │
│ │ [_________] │ │ [_________] │ │ [_________] │        │
│ └─────────────┘ └─────────────┘ └─────────────┘        │
│ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐        │
│ │ 焊接方法    │ │ 保护气体    │ │ 气体流量    │        │
│ │ [▼________] │ │ [▼________] │ │ [_________] │        │
│ └─────────────┘ └─────────────┘ └─────────────┘        │
└─────────────────────────────────────────────────────────┘
```

### 图表生成器模态框
```
┌─────────────────────────────────────────────────────────┐
│ 生成坡口图                                      [关闭]   │
├─────────────────────────────────────────────────────────┤
│ 坡口图生成器                                             │
├──────────────────────────┬──────────────────────────────┤
│ 参数设置                 │ 预览                          │
│                          │                              │
│ 坡口类型                 │  ┌────────────────────┐      │
│ [V型 ▼]                  │  │                    │      │
│                          │  │    ╱────────╲      │      │
│ 坡口角度 (°)             │  │   ╱          ╲     │      │
│ [60_______]              │  │  ╱            ╲    │      │
│                          │  │ ╱              ╲   │      │
│ 根部间隙 (mm)            │  │╱________________╲  │      │
│ [2________]              │  │                    │      │
│                          │  └────────────────────┘      │
│ 厚度 (mm)                │                              │
│ [10_______]              │                              │
│                          │                              │
│ [生成图表] [下载]        │                              │
└──────────────────────────┴──────────────────────────────┘
```

---

## 💡 使用技巧

### 技巧 1: 快速创建相似模块
```
如果需要创建多个相似的模块：
1. 创建第一个模块
2. 使用"复制"功能创建副本
3. 只修改不同的部分
4. 节省大量时间
```

### 技巧 2: 预览后再使用
```
在将模块添加到模板之前：
1. 先使用"预览"功能查看效果
2. 确认字段布局和类型
3. 避免创建后发现不合适
```

### 技巧 3: 图表参数调优
```
生成图表时：
1. 先设置大致参数
2. 观察实时预览
3. 微调参数直到满意
4. 再点击"生成图表"
```

### 技巧 4: 保存常用图表
```
如果某个图表经常使用：
1. 生成图表后点击"下载"
2. 保存到本地
3. 下次直接上传，无需重新生成
```

---

## 🔄 工作流程示例

### 完整的WPS创建流程
```
1. 规划阶段
   ├─ 确定需要的模块
   ├─ 预览预设模块
   └─ 决定是否需要自定义模块

2. 准备阶段
   ├─ 复制预设模块创建自定义模块
   ├─ 调整字段
   └─ 预览确认

3. 创建阶段
   ├─ 创建新WPS
   ├─ 选择模板
   ├─ 填写基本信息
   ├─ 生成或上传技术图表
   └─ 填写其他字段

4. 完成阶段
   ├─ 预览整个WPS
   ├─ 检查所有字段
   └─ 保存WPS
```

---

## 📊 功能对比

### 改进前 vs 改进后

| 功能 | 改进前 | 改进后 |
|------|--------|--------|
| 预设模块预览 | ✅ 已有 | ✅ 保持 |
| 预设模块复制 | ✅ 已有 | ✅ 保持 |
| 自定义模块预览 | ❌ 只显示字段列表 | ✅ 显示真实表单 |
| 自定义模块复制 | ❌ 不支持 | ✅ 新增支持 |
| 技术图表上传 | ✅ 已有 | ✅ 保持 |
| 技术图表生成 | ❌ 不支持 | ✅ 新增支持 |
| 图表实时预览 | ❌ 不支持 | ✅ 新增支持 |
| 图表下载 | ❌ 不支持 | ✅ 新增支持 |

---

## 🎯 最佳实践

### 1. 模块命名规范
```
✅ 好的命名:
- "项目A焊接参数"
- "公司标准基本信息"
- "特殊工艺气体参数"

❌ 不好的命名:
- "模块1"
- "测试"
- "aaa"
```

### 2. 字段设计原则
```
✅ 好的设计:
- 字段名称清晰明确
- 合理使用单位
- 设置必填字段
- 提供默认值

❌ 不好的设计:
- 字段名称模糊
- 缺少单位
- 所有字段都必填
- 没有默认值
```

### 3. 图表生成建议
```
✅ 推荐做法:
- 使用标准参数值
- 生成后检查效果
- 保存常用图表
- 必要时手动上传

❌ 不推荐:
- 使用极端参数值
- 不检查直接使用
- 每次都重新生成
```

---

## 🎉 总结

通过本次改进，WPS模块管理系统现在提供：

1. **统一的预览体验** - 预设模块和自定义模块都能看到真实表单效果
2. **灵活的复制功能** - 可以复制任何模块作为新模块的起点
3. **强大的图表功能** - 支持手动上传和自动生成两种方式
4. **实时的可视化** - 参数改变时图表立即更新

这些改进大大提升了用户体验和工作效率！

