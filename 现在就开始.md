# 🚀 现在就开始 - 最简单的部署方式

## ✅ 准备工作

你需要知道你的**腾讯云服务器 root 密码**。

### 如果不记得密码：

1. 登录腾讯云控制台：https://console.cloud.tencent.com/cvm/instance
2. 找到服务器 → 更多 → 密码/密钥 → 重置密码
3. 设置新密码（例如：`Welding@2024!`）
4. 重启服务器
5. 等待 1-2 分钟

---

## 🎯 开始上传（3 个步骤）

### 步骤 1: 打开 PowerShell

在项目文件夹中：
- 按住 `Shift` 键
- 右键点击空白处
- 选择"在此处打开 PowerShell 窗口"

或者直接在 VSCode 终端中操作（已经打开了）

---

### 步骤 2: 运行上传脚本

在 PowerShell 中执行：

```powershell
.\简单上传.ps1
```

**如果提示执行策略错误**，先运行：

```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

然后再运行：

```powershell
.\简单上传.ps1
```

---

### 步骤 3: 按提示操作

脚本会提示你输入密码**3-4 次**（这是正常的，因为每个 SSH/SCP 命令都需要密码）：

1. **第一次**：创建目录时
   - 可能会提示：`Are you sure you want to continue connecting (yes/no)?`
   - 输入：`yes`
   - 然后输入密码

2. **第二次**：上传代码时
   - 输入密码
   - 等待上传完成（2-5 分钟）

3. **第三次**：设置权限时
   - 输入密码

4. **第四次**（可选）：如果选择立即部署
   - 输入密码
   - 等待部署完成（10-15 分钟）

---

## 📝 完整命令（手动方式）

如果脚本无法运行，可以手动执行以下命令：

### 在 PowerShell 中依次执行：

```powershell
# 1. 修复 SSH 主机密钥
ssh-keygen -R 43.142.188.252

# 2. 创建服务器目录
ssh root@43.142.188.252 "mkdir -p /root/welding-system"
# 提示 yes/no 时输入: yes
# 然后输入密码

# 3. 上传代码
scp -r . root@43.142.188.252:/root/welding-system/
# 输入密码，等待上传完成

# 4. 设置执行权限
ssh root@43.142.188.252 "cd /root/welding-system && chmod +x deploy.sh create_default_admin.sh"
# 输入密码

# 5. 开始部署
ssh root@43.142.188.252 "cd /root/welding-system && ./deploy.sh"
# 输入密码，等待部署完成
```

---

## ⚠️ 常见问题

### Q1: 提示 "Host key verification failed"

**解决**：
```powershell
ssh-keygen -R 43.142.188.252
```

### Q2: 提示 "Permission denied"

**原因**：密码错误

**解决**：
1. 确认密码正确
2. 或者重置密码（见上方"准备工作"）

### Q3: 提示 "Connection refused"

**原因**：服务器 SSH 端口未开放

**解决**：
1. 登录腾讯云控制台
2. 检查安全组规则
3. 确保端口 22 已开放

### Q4: 上传很慢

**原因**：网络速度限制

**建议**：
- 耐心等待
- 使用有线网络
- 关闭其他占用带宽的程序

### Q5: 输入密码时没有显示

**这是正常的！** SSH/SCP 输入密码时不会显示任何字符（包括 `*` 号），这是安全设计。

直接输入密码，然后按回车即可。

---

## 🎯 快速开始（复制粘贴）

### 方式 A: 使用脚本（推荐）

```powershell
# 如果需要，先设置执行策略
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser

# 运行上传脚本
.\简单上传.ps1
```

### 方式 B: 手动命令（一次性复制）

```powershell
# 修复 SSH
ssh-keygen -R 43.142.188.252

# 创建目录
ssh root@43.142.188.252 "mkdir -p /root/welding-system"

# 上传代码
scp -r . root@43.142.188.252:/root/welding-system/

# 设置权限
ssh root@43.142.188.252 "cd /root/welding-system && chmod +x deploy.sh create_default_admin.sh"

# 部署
ssh root@43.142.188.252 "cd /root/welding-system && ./deploy.sh"
```

---

## ✅ 验证上传成功

上传完成后，验证文件：

```powershell
ssh root@43.142.188.252 "ls -la /root/welding-system"
```

应该看到：
- backend/
- frontend/
- admin-portal/
- docker-compose.yml
- deploy.sh
- 等等...

---

## 🚀 部署后访问

部署完成后，访问：

### 用户门户
https://sdhaohan.cn

### 管理门户
https://laimiu.sdhaohan.cn

**登录信息**:
- 邮箱: `Laimiu.new@gmail.com`
- 密码: `ghzzz123`

### API 文档
https://api.sdhaohan.cn/api/v1/docs

---

## ⏱️ 预计时间

- 修复 SSH: 10 秒
- 创建目录: 10 秒
- 上传代码: 2-5 分钟
- 设置权限: 10 秒
- 部署系统: 10-15 分钟
- **总计: 15-20 分钟**

---

## 📞 需要帮助？

如果遇到问题：

1. 检查网络连接
2. 确认服务器密码正确
3. 查看错误信息
4. 参考"常见问题"部分

---

## 🎊 准备好了吗？

### 现在就开始！

在 PowerShell 中执行：

```powershell
.\简单上传.ps1
```

然后按提示输入密码，等待完成！

**20 分钟后，你的系统就上线了！** 🚀

---

## 📋 检查清单

上传前确认：

- [ ] 已知道服务器 root 密码（或已重置）
- [ ] 已配置 DNS 解析（3 条 A 记录）
- [ ] 网络连接正常
- [ ] 在项目根目录打开 PowerShell

上传后确认：

- [ ] 所有文件已上传
- [ ] 脚本有执行权限
- [ ] 准备开始部署

---

**服务器信息**:
- IP: `43.142.188.252`
- 用户: `root`
- 项目目录: `/root/welding-system`

**开始吧！** ✨

